Return-Path: <xmlbeans-user-return-69-smith=stanford.edu@xml.apache.org>
Received: from leland4.Stanford.EDU (leland4.Stanford.EDU [171.64.14.29])
	by popserver1.Stanford.EDU (8.12.10/8.12.10) with ESMTP id h9N13RdX002081
	for <smith@popserver1.stanford.edu>; Wed, 22 Oct 2003 18:03:27 -0700
	(PDT)
Received: from mail.apache.org (daedalus.apache.org [208.185.179.12]) by
	leland4.Stanford.EDU (8.12.10/8.12.10) with SMTP id h9N13KsJ004146 for
	<smith@stanford.edu>; Wed, 22 Oct 2003 18:03:21 -0700 (PDT)
Received: (qmail 38885 invoked by uid 500); 23 Oct 2003 01:02:28 -0000
Mailing-List: contact xmlbeans-user-help@xml.apache.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Post: <mailto:xmlbeans-user@xml.apache.org>
List-Help: <mailto:xmlbeans-user-help@xml.apache.org>
List-Unsubscribe: <mailto:xmlbeans-user-unsubscribe@xml.apache.org>
List-Subscribe: <mailto:xmlbeans-user-subscribe@xml.apache.org>
Reply-To: xmlbeans-user@xml.apache.org
Delivered-To: mailing list xmlbeans-user@xml.apache.org
Received: (qmail 38739 invoked from network); 23 Oct 2003 01:02:27 -0000
Subject: RE: deep equals implementation?
From: Kevin Krouse <kkrouse@bea.com>
To: xmlbeans-user@xml.apache.org
In-Reply-To: <OF1B4C50E4.B7785DBF-ONCA256DC8.0004D9E2@tmca.com.au>
References: <OF1B4C50E4.B7785DBF-ONCA256DC8.0004D9E2@tmca.com.au>
Content-Type: multipart/mixed; boundary="=-QCWGDIc/laJC9qCvEURh"
Organization: BEA Systems, INC.
Message-Id: <1066870955.1116.7.camel@kkrouselnx.beanw.com>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 
Date: Wed, 22 Oct 2004 18:02:35 -0700
X-Zimbra-Received: Wed, 22 Oct 2004 18:02:35 -0700
X-OriginalArrivalTime: 23 Oct 2003 01:02:35.0701 (UTC)
	FILETIME=[5899FE50:01C39901]
X-Spam-Rating: daedalus.apache.org 1.6.2 0/1000/N
X-Evolution-Source: imap://smith@smith.pobox.stanford.edu/
X-Evolution: 0000004a-0030


--=-QCWGDIc/laJC9qCvEURh
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

I've attached a simple XmlCursor based comparison utility that ignores
whitespace and does basically what eric describes.

--
Kevin Krouse
BEA Systems

--=-QCWGDIc/laJC9qCvEURh
Content-Disposition: attachment; filename=XBeanCompare.java
Content-Type: text/x-java; name=XBeanCompare.java; charset=iso-8859-1
Content-Transfer-Encoding: base64

DQppbXBvcnQgY29tLmJlYS54bWwuWG1sQ3Vyc29yOw0KaW1wb3J0IGNvbS5iZWEueG1sLlhtbEJl
YW5zOw0KaW1wb3J0IGNvbS5iZWEueG1sLlhtbE9iamVjdDsNCmltcG9ydCBjb20uYmVhLnhtbC5Y
bWxPcHRpb25zOw0KaW1wb3J0IGNvbS5iZWEueG1sLlhtbEV4Y2VwdGlvbjsNCmltcG9ydCBjb20u
YmVhLnhiZWFuLmNvbW1vbi5RTmFtZUhlbHBlcjsNCmltcG9ydCBjb20uYmVhLnhiZWFuLmNvbW1v
bi5YbWxXaGl0ZXNwYWNlOw0KDQppbXBvcnQgamF2YS5pby5GaWxlOw0KDQovKioNCiAqDQogKi8N
CnB1YmxpYyBjbGFzcyBYQmVhbkNvbXBhcmUNCnsNCg0KICAgIHByaXZhdGUgc3RhdGljIGNsYXNz
IERpYWdub3N0aWMNCiAgICB7DQogICAgICAgIHByaXZhdGUgU3RyaW5nQnVmZmVyIG1lc3NhZ2Ug
PSBuZXcgU3RyaW5nQnVmZmVyKCk7DQoNCiAgICAgICAgdm9pZCBhZGQoU3RyaW5nIHMpDQogICAg
ICAgIHsNCiAgICAgICAgICAgIG1lc3NhZ2UuYXBwZW5kKHMpLmFwcGVuZCgiXG4iKTsNCiAgICAg
ICAgfQ0KDQogICAgICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKQ0KICAgICAgICB7DQogICAg
ICAgICAgICByZXR1cm4gbWVzc2FnZS50b1N0cmluZygpOw0KICAgICAgICB9DQogICAgfQ0KDQog
ICAgLyoqDQogICAgICogUHJvdmlkcyBhbiB1dGlsaXR5IHRvIGNvbXBhcmUgdGhlIHhtbCBpbnNp
ZGUgdGhlIHR3byBzdHJpbmdzDQogICAgICogUmVzdWx0OiB0cnVlIGlmIHRoZSB4bWwgaW5zaWRl
IHRoZSB0d28gc3RyaW5ncyBpcyB0aGUgc2FtZQ0KICAgICAqICAgb3RoZXJ3aXNlIGZhbHNlDQog
ICAgICovDQogICAgcHJpdmF0ZSBzdGF0aWMgYm9vbGVhbiBsZW5pZW50bHlDb21wYXJlVHdvWG1s
U3RyaW5ncyhYbWxPYmplY3QgYWN0dWFsT2JqLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWG1sT2JqZWN0IGV4cGVjdE9iaiwgRGlhZ25v
c3RpYyBkaWFnKQ0KICAgIHsNCiAgICAgICAgYm9vbGVhbiBtYXRjaCA9IHRydWU7DQoNCiAgICAg
ICAgWG1sQ3Vyc29yIGN1cjEgPSBhY3R1YWxPYmoubmV3Q3Vyc29yKCk7DQogICAgICAgIFhtbEN1
cnNvciBjdXIyID0gZXhwZWN0T2JqLm5ld0N1cnNvcigpOw0KDQogICAgICAgIGN1cjEudG9GaXJz
dENoaWxkKCk7DQogICAgICAgIGN1cjIudG9GaXJzdENoaWxkKCk7DQoNCiAgICAgICAgd2hpbGUg
KGN1cjEuY3VycmVudFRva2VuVHlwZSgpICE9IFhtbEN1cnNvci5Ub2tlblR5cGUuU1RBUlRET0Mp
IHsNCiAgICAgICAgICAgIGlmICghY29tcGFyZU5hbWVzQW5kQXR0cmlidXRlcyhjdXIxLCBjdXIy
LCBkaWFnKSkgew0KICAgICAgICAgICAgICAgIG1hdGNoID0gZmFsc2U7DQogICAgICAgICAgICB9
DQoNCiAgICAgICAgICAgIGJvb2xlYW4gaGFzQ2hpbGRyZW4xID0gY3VyMS50b0ZpcnN0Q2hpbGQo
KTsNCiAgICAgICAgICAgIGJvb2xlYW4gaGFzQ2hpbGRyZW4yID0gY3VyMi50b0ZpcnN0Q2hpbGQo
KTsNCiAgICAgICAgICAgIGlmIChoYXNDaGlsZHJlbjEgIT0gaGFzQ2hpbGRyZW4yKSB7DQogICAg
ICAgICAgICAgICAgZGlhZy5hZGQoIlRvcG9sb2d5IGRpZmZlcnM6IG9uZSBkb2N1bWVudCBoYXMg
IiArDQogICAgICAgICAgICAgICAgICAgICJjaGlsZHJlbiB3aGVyZSB0aGUgb3RoZXIgZG9lcyBu
b3QgKCIgKw0KICAgICAgICAgICAgICAgICAgICBRTmFtZUhlbHBlci5wcmV0dHkoY3VyMS5nZXRO
YW1lKCkpICsgIiwgIiArDQogICAgICAgICAgICAgICAgICAgIFFOYW1lSGVscGVyLnByZXR0eShj
dXIyLmdldE5hbWUoKSkgKyAiKS4iKTsgLy8gVE9ETzogd2hlcmU/DQogICAgICAgICAgICAgICAg
bWF0Y2ggPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBpZiAoaGFzQ2hpbGRyZW4xKSB7DQogICAg
ICAgICAgICAgICAgICAgIGN1cjEudG9QYXJlbnQoKTsNCiAgICAgICAgICAgICAgICAgICAgaGFz
Q2hpbGRyZW4xID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlm
IChoYXNDaGlsZHJlbjIpIHsNCiAgICAgICAgICAgICAgICAgICAgY3VyMi50b1BhcmVudCgpOw0K
ICAgICAgICAgICAgICAgICAgICBoYXNDaGlsZHJlbjIgPSBmYWxzZTsNCiAgICAgICAgICAgICAg
ICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NoaWxkcmVuMSA9PSBmYWxzZSkgew0KICAg
ICAgICAgICAgICAgIGlmICghd3NDb2xsYXBzZUVxdWFsKGN1cjEuZ2V0VGV4dFZhbHVlKCksIGN1
cjIuZ2V0VGV4dFZhbHVlKCkpKSB7DQogICAgICAgICAgICAgICAgICAgIGRpYWcuYWRkKCJWYWx1
ZSAnIiArIGN1cjEuZ2V0VGV4dFZhbHVlKCkgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIicg
ZGlmZmVycyBmcm9tIHZhbHVlICciICsgY3VyMi5nZXRUZXh0VmFsdWUoKSArICInLiIpOw0KICAg
ICAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAg
ICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGhhc0NoaWxkcmVuMSkNCiAgICAgICAgICAgICAg
ICBjb250aW51ZTsNCg0KICAgICAgICAgICAgZm9yICg7IDspIHsNCiAgICAgICAgICAgICAgICBi
b29sZWFuIGhhc1NpYmxpbmcxID0gY3VyMS50b05leHRTaWJsaW5nKCk7DQogICAgICAgICAgICAg
ICAgYm9vbGVhbiBoYXNTaWJsaW5nMiA9IGN1cjIudG9OZXh0U2libGluZygpOw0KDQogICAgICAg
ICAgICAgICAgaWYgKGhhc1NpYmxpbmcxICE9IGhhc1NpYmxpbmcyKSB7DQogICAgICAgICAgICAg
ICAgICAgIGRpYWcuYWRkKCJUb3BvbG9neSBkaWZmZXJzOiBvbmUgZG9jdW1lbnQgaGFzICIgKw0K
ICAgICAgICAgICAgICAgICAgICAgICAgInNpYmxpbmdzIHdoZXJlIHRoZSBvdGhlciBkb2VzIG5v
dC4iKTsgLy8gVE9ETzogd2hlcmU/DQogICAgICAgICAgICAgICAgICAgIGhhc1NpYmxpbmcxID0g
ZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIGhhc1NpYmxpbmcyID0gZmFsc2U7DQogICAgICAg
ICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGhhc1NpYmxpbmcxKQ0KICAgICAgICAg
ICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgIGN1cjEudG9QYXJlbnQoKTsNCiAg
ICAgICAgICAgICAgICBjdXIyLnRvUGFyZW50KCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoY3Vy
MS5jdXJyZW50VG9rZW5UeXBlKCkgPT0gWG1sQ3Vyc29yLlRva2VuVHlwZS5TVEFSVERPQykNCiAg
ICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAg
ICAgcmV0dXJuIG1hdGNoOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGJvb2xlYW4gY29t
cGFyZU5hbWVzQW5kQXR0cmlidXRlcyhYbWxDdXJzb3IgY3VyMSwNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWG1sQ3Vyc29yIGN1cjIsIERpYWdu
b3N0aWMgZGlhZykNCiAgICB7DQogICAgICAgIGlmICghY3VyMS5nZXROYW1lKCkuZXF1YWxzKGN1
cjIuZ2V0TmFtZSgpKSkgew0KICAgICAgICAgICAgZGlhZy5hZGQoIkVsZW1lbnQgbmFtZXMgJyIg
Kw0KICAgICAgICAgICAgICAgIFFOYW1lSGVscGVyLnByZXR0eShjdXIxLmdldE5hbWUoKSkgKyAi
JyBhbmQgJyIgKw0KICAgICAgICAgICAgICAgIFFOYW1lSGVscGVyLnByZXR0eShjdXIyLmdldE5h
bWUoKSkgKyAiJyBkbyBub3QgbWF0Y2guIik7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQog
ICAgICAgIH0NCg0KICAgICAgICBTdHJpbmcgZWxlbU5hbWUgPSBRTmFtZUhlbHBlci5wcmV0dHko
Y3VyMS5nZXROYW1lKCkpOw0KDQogICAgICAgIGJvb2xlYW4gbW9yZSA9IGN1cjEudG9GaXJzdEF0
dHJpYnV0ZSgpOw0KICAgICAgICBpZiAobW9yZSkgew0KICAgICAgICAgICAgZm9yICg7IG1vcmU7
IG1vcmUgPSBjdXIxLnRvTmV4dEF0dHJpYnV0ZSgpKSB7DQogICAgICAgICAgICAgICAgU3RyaW5n
IHRleHQxID0gY3VyMS5nZXRUZXh0VmFsdWUoKTsNCiAgICAgICAgICAgICAgICBTdHJpbmcgdGV4
dDIgPSBjdXIyLmdldEF0dHJpYnV0ZVRleHQoY3VyMS5nZXROYW1lKCkpOw0KICAgICAgICAgICAg
ICAgIGlmICh0ZXh0MiA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGRpYWcuYWRkKCJB
dHRyaWJ1dGUgJyIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgUU5hbWVIZWxwZXIucHJldHR5
KGN1cjEuZ2V0TmFtZSgpKSArICInICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIiBvZiBl
bGVtZW50ICciICsgZWxlbU5hbWUgKyAiJyBub3QgcHJlc2VudC4iKTsNCiAgICAgICAgICAgICAg
ICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAg
IGlmICghd3NDb2xsYXBzZUVxdWFsKHRleHQxLCB0ZXh0MikpIHsNCiAgICAgICAgICAgICAgICAg
ICAgZGlhZy5hZGQoIkF0dHJpYnV0ZSB2YWx1ZXMgZm9yICciICsNCiAgICAgICAgICAgICAgICAg
ICAgICAgIFFOYW1lSGVscGVyLnByZXR0eShjdXIxLmdldE5hbWUoKSkgKyAiJyAiICsNCiAgICAg
ICAgICAgICAgICAgICAgICAgICIgb2YgZWxlbWVudCAnIiArIGVsZW1OYW1lICsgIicgZG9uJ3Qg
bWF0Y2guIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAg
ICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjdXIxLnRvUGFyZW50KCk7DQogICAg
ICAgIH0NCg0KICAgICAgICBtb3JlID0gY3VyMi50b0ZpcnN0QXR0cmlidXRlKCk7DQogICAgICAg
IGlmIChtb3JlKSB7DQogICAgICAgICAgICBmb3IgKDsgbW9yZTsgbW9yZSA9IGN1cjIudG9OZXh0
QXR0cmlidXRlKCkpIHsNCiAgICAgICAgICAgICAgICBTdHJpbmcgdGV4dDEgPSBjdXIxLmdldEF0
dHJpYnV0ZVRleHQoY3VyMi5nZXROYW1lKCkpOw0KICAgICAgICAgICAgICAgIGlmICh0ZXh0MSA9
PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGRpYWcuYWRkKCJBdHRyaWJ1dGUgJyIgKw0K
ICAgICAgICAgICAgICAgICAgICAgICAgUU5hbWVIZWxwZXIucHJldHR5KGN1cjIuZ2V0TmFtZSgp
KSArICInICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIiBvZiBlbGVtZW50ICciICsgZWxl
bU5hbWUgKyAiJyBub3QgcHJlc2VudC4iKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZh
bHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGN1cjIu
dG9QYXJlbnQoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0K
ICAgIHB1YmxpYyBzdGF0aWMgYm9vbGVhbiB3c0NvbGxhcHNlRXF1YWwoU3RyaW5nIHMxLCBTdHJp
bmcgczIpDQogICAgew0KICAgICAgICBTdHJpbmcgczFjID0gWG1sV2hpdGVzcGFjZS5jb2xsYXBz
ZShzMSk7DQogICAgICAgIFN0cmluZyBzMmMgPSBYbWxXaGl0ZXNwYWNlLmNvbGxhcHNlKHMyKTsN
CiAgICAgICAgcmV0dXJuIChzMWMuZXF1YWxzKHMyYykpOw0KICAgIH0NCg0KICAgIHB1YmxpYyBz
dGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpDQogICAgICAgIHRocm93cyBjb20uYmVhLnht
bC5YbWxFeGNlcHRpb24sIGphdmEuaW8uSU9FeGNlcHRpb24NCiAgICB7DQogICAgICAgIGlmIChh
cmdzLmxlbmd0aCA8IDIpIHsNCiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbigiVXNhZ2U6
IFhCZWFuQ29tcGFyZSBmaWxlMS54bWwgZmlsZTIueG1sIik7DQogICAgICAgICAgICBTeXN0ZW0u
ZXhpdCgxKTsNCiAgICAgICAgfQ0KDQogICAgICAgIEZpbGUgZmlsZTEgPSBuZXcgRmlsZShhcmdz
WzBdKTsNCiAgICAgICAgRmlsZSBmaWxlMiA9IG5ldyBGaWxlKGFyZ3NbMV0pOw0KDQogICAgICAg
IFhtbE9iamVjdCB4b2JqMSA9IFhtbE9iamVjdC5GYWN0b3J5LnBhcnNlKGZpbGUxKTsNCiAgICAg
ICAgWG1sT2JqZWN0IHhvYmoyID0gWG1sT2JqZWN0LkZhY3RvcnkucGFyc2UoZmlsZTIpOw0KDQog
ICAgICAgIERpYWdub3N0aWMgZGlhZyA9IG5ldyBEaWFnbm9zdGljKCk7DQogICAgICAgIGlmIChs
ZW5pZW50bHlDb21wYXJlVHdvWG1sU3RyaW5ncyh4b2JqMSwgeG9iajIsIGRpYWcpKSB7DQogICAg
ICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oImVxdWFsLiIpOw0KICAgICAgICB9DQogICAgICAg
IGVsc2Ugew0KICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGRpYWcpOw0KICAgICAgICB9
DQogICAgfQ0KfQ0KDQo=

--=-QCWGDIc/laJC9qCvEURh
Content-Type: text/plain; charset=us-ascii

- ---------------------------------------------------------------------
To unsubscribe, e-mail:   xmlbeans-user-unsubscribe@xml.apache.org
For additional commands, e-mail: xmlbeans-user-help@xml.apache.org
Apache XMLBeans Project -- URL: http://xml.apache.org/xmlbeans/
--=-QCWGDIc/laJC9qCvEURh--

