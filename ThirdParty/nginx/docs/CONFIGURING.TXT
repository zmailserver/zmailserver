                 [CONFIGURING ZIMBRA NGINX POP/IMAP/HTTP PROXY]

    Zmail NGINX POP/IMAP/HTTP proxy configuration is generated by the 
    zmproxyconfgen config generation script. This script reads in the proxy
    configuration template files, and generates the NGINX config files after
    performing keyword substitution on the template files with values from the
    LDAP configuration.

    zmproxyconfgen is usually never invoked directly -- it is invoked 
    automatically by zmproxyctl

    The following sections describe the structure of the NGINX Proxy 
    Configuration

    (I) Config Files and Config Templates
    -------------------------------------

    To simplify configuration, the NGINX configuration files have been split
    up into different config files based on functionality

    The main, top-level configuration file is /opt/zmail/conf/nginx.conf, and
    this file includes the main config, memcache config, mail config, and web 
    config files

    The mail config in turn includes the configuration for imap, imaps, pop3
    and pop3s

    The web config includes the configuration for http and https. Each of the 
    http and https configs include exactly one sub-configuration which depends
    on the mail mode, which can be one of http,https,both,redirect,mixed

    The template files follow exactly the same inclusion hierarchy, and each
    configuration file has a corresponding template file from which it is 
    generated

    Each template file resides in /opt/zmail/conf/nginx/templates/

    Each corresponding config file resides in /opt/zmail/conf/nginx/includes/
    (excluding top-level config file which is /opt/zmail/conf/nginx/nginx.conf)

    The next section describes the configuration inclusion hierarchy

    (II) Config File Hierarchy
    --------------------------

    The symbol |_ indicates that a file is included by the one above it
    Increasing levels of indentation indicate lower levels of config files

    /opt/zmail/conf/nginx.conf
     |_ /opt/zmail/conf/nginx/includes/nginx.conf.main
     |_ /opt/zmail/conf/nginx/includes/nginx.conf.memcache
     |_ /opt/zmail/conf/nginx/includes/nginx.conf.mail
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.mail.imap
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.mail.imaps
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3s
     |_ /opt/zmail/conf/nginx/includes/nginx.conf.web
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.web.http
           |_ /opt/zmail/conf/nginx/includes/nginx.conf.web.http.mode-<M>
        |_ /opt/zmail/conf/nginx/includes/nginx.conf.web.https
           |_ /opt/zmail/conf/nginx/includes/nginx.conf.web.https.mode-<M>

    ... where <M> is the mail mode, and can be one of
    http|https|both|redirect|mixed

    (III) Description of Config Files
    ---------------------------------

    * /opt/zmail/conf/nginx.conf

      Description:
        Core NGINX configuration file read by NGINX Proxy

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.template

      Keywords:
        ${core.workdir}         : NGINX working directory

      Includes:
        /opt/zmail/conf/nginx/includes/nginx.conf.main
        /opt/zmail/conf/nginx/includes/nginx.conf.memcache
        /opt/zmail/conf/nginx/includes/nginx.conf.mail
        /opt/zmail/conf/nginx/includes/nginx.conf.web

    * /opt/zmail/conf/nginx/includes/nginx.conf.main

      Description:
        Defines global parameters for all NGINX worker processes

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.main.template

      Keywords:
        ${main.user}            : User Name of worker process
        ${main.group}           : Group Name of worker process
        ${main.workers}         : Number of worker processes
        ${main.pidfile}         : NGINX PID file
        ${main.logfile}         : Error Log file
        ${main.loglevel}        : Error Log level
        ${main.connections}     : Number of connections that each worker 
                                : process is allowed to handle
        ${main.krb5keytab}      : Location of Kerberos Keytab file used for
                                : GSSAPI authentication

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.memcache

      Description:
        Defines memcache configuration, common for mail and web

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.memcache.template

      Keywords:
        ${memcache.:servers}    : List of available memcache servers/ports
        ${memcache.timeout}     : The time that NGINX will wait for a cache
                                : result before treating it as a cache miss
        ${memcache.reconnect}   : The time after which NGINX will attempt to
                                : re-connect to a memcache server which has
                                : gone down
        ${memcache.ttl}         : The time interval that an entry will spend
                                : in memcache before being automatically 
                                : evicted by memcache
        ${memcache.unqual}      : (deprecated) Whether mail routes should be
                                : stored without user-name qualification
                                : The value is always considered false

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.mail

      Description:
        Defines the common mail configuration common to IMAP and POP3

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.mail.template

      Keywords:
        ${mail.timeout}         : Idle timeout between mail client and proxy
        ${mail.passerrors}      : Whether to pass backend errors to client
        ${mail.:auth_http}      : The list of route lookup handlers 
        ${mail.pop3capa}        : NGINX POP3 capabilities
        ${mail.imapcapa}        : NGINX IMAP capabilities
        ${mail.imapid}          : Response given by NGINX to the IMAP ID command
                                : (RFC 2971)
        ${mail.dpasswd}         : Password for zmnginx user (GSSAPI auth)
        ${mail.defaultrealm}    : Default Kerberos Realm (GSSAPI auth)
        ${mail.sasl_host_from_ip}
                                : Whether to look up service principal by 
                                : incoming interface address (GSSAPI auth)
        ${mail.saslapp}         : NGINX SASL authentication application name
                                : (GSSAPI auth)
        ${mail.ipmax}           : IP throttle counter
        ${mail.ipttl}           : TTL for IP throttle counter
        ${mail.iprej}           : IP throttle rejection message
        ${mail.usermax}         : User throttle counter
        ${mail.userttl}         : TTL for User throttle counter
        ${mail.userrej}         : User throttle rejection message
        ${mail.upstream.pop3xoip}
                                : Whether to send XOIP to POP3 upstream before
                                : logging in (Audit)
        ${mail.upstream.imapid} : Whether to send ID command to IMAP upstream
                                : before logging in (Audit)
        ${mail.imap.authplain.enabled}
                                : Enables AUTH PLAIN support for IMAP
        ${mail.imap.authgssapi.enabled}
                                : Enables AUTH GSSAPI support for IMAP
        ${mail.pop3.authplain.enabled}
                                : Enables AUTH PLAIN support for POP3
        ${mail.pop3.authgssapi.enabled}
                                : Enables AUTH GSSAPI support for POP3
        ${mail.imap.literalauth}: Enables upstream IMAP auth using literals
        ${mail.auth_wait}       : Time delay before which NGINX will reject
                                : an invalid login attempt
        ${mail.ssl.preferserverciphers}
                                : Requires protocols SSLv3 and TLSv1 server
                                : ciphers be preferred over client's ciphers. 
        ${mail.ssl.cert}        : Path to server certificate (IMAPS+POP3S)
        ${mail.ssl.key}         : Path to server certificate key (IMAPS+POP3S)
        ${mail.ssl.ciphers}     : Permitted ciphers

        Includes:
          /opt/zmail/conf/nginx/includes/nginx.conf.mail.imap
          /opt/zmail/conf/nginx/includes/nginx.conf.mail.imaps
          /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3
          /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3s

    * /opt/zmail/conf/nginx/includes/nginx.conf.mail.imap

      Description:
        Defines the server block for IMAP 

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.mail.imap.template

      Keywords:
        ${mail.imap.port}       : IMAP server port
        ${mail.imap.tls}        : TLS Mode for IMAP (on|off|only)

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.mail.imaps

      Description:
        Defines the server block for IMAPS

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.mail.imaps.template

      Keywords:
        ${mail.imaps.port}      : IMAPS server port

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3

      Description:
        Defines the server block for POP3

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.mail.pop3.template

      Keywords:
        ${mail.pop3.port}       : POP3 server port
        ${mail.pop3.tls}        : POP3 TLS Mode for POP3 (on|off|only)

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.mail.pop3s

      Description:
        Defines the server block for POP3S

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.mail.pop3s.template

      Keywords:
        ${mail.pop3s.port}      : POP3S server port

      Includes:
        None

    * /opt/zmail/conf/nginx/includes/nginx.conf.web

      Description:
        Defines the common web configuration common to HTTP and HTTPS

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.web.template

      Keywords:
        ${web.upstream.name}    : Symbolic name of upstream server cluster
        ${web.upstream.:servers}: List of upstream HTTP servers
        ${web.:routehandlers}   : List of route handlers
        ${web.routetimeout}     : Route lookup timeout

      Includes:
        /opt/zmail/conf/nginx/includes/nginx.conf.web.http
        /opt/zmail/conf/nginx/includes/nginx.conf.web.https

    * /opt/zmail/conf/nginx/includes/nginx.conf.web.http

      Description:
        Defines the server block for HTTP

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.web.http.template

      Keywords:
        ${web.http.port}        : HTTP server port
        ${web.http.maxbody}     : Maximum allowed size for client request

      Includes:
        /opt/zmail/conf/nginx/includes/nginx.conf.web.http.mode-<M>
        (<M> is mail mode, and can be one of http|https|both|redirect|mixed)

    * /opt/zmail/conf/nginx/includes/nginx.conf.web.https

      Description:
        Defines the server block for HTTPS

      Template:
        /opt/zmail/conf/nginx/templates/nginx.conf.web.http.template

      Keywords:
        ${web.https.port}       : HTTPS server port
        ${web.https.maxbody}    : Maximum allowed size for client request
        ${web.ssl.cert}         : Path to server certificate
        ${web.ssl.key}          : Path to server certificate key

      Includes:
        /opt/zmail/conf/nginx/includes/nginx.conf.web.https.mode-<M>
        (<M> is mail mode, and can be one of http|https|both|redirect|mixed)


    * /opt/zmail/conf/nginx/includes/nginx.conf.web.http(s).mode-<M>

      Description:
        There are 5 mail modes, and there exists one config file for each 
        mail mode for HTTP as well as separate ones for HTTPS

      Template:
      /opt/zmail/conf/nginx/templates/nginx.conf.web.http(s).mode-<M>.template

      Keywords:
        None

      Includes:
        None

    (IV) Customizing the proxy configuration
    ----------------------------------------

    A few LDAP attributes (and some localconfig values) affect some of the
    variable definitions in the Proxy Configuration Files. The config generation
    script (zmproxyconfgen) is responsible for reading these LDAP attributes
    and performing the textual substitution in the template files.

    The following is the list of LDAP attributes (and localconfig values) that
    govern the NGINX configuration keywords. The list includes the attribute 
    name, its type, how to get, how to set, which NGINX keyword it overrides,
    and its default value.

    To customize the NGINX configuration, modify these attributes, and 
    generate the proxy configuration by running the command 

    $ /opt/zmail/libexec/zmmtaconfig proxy

    If the nginx keyword that you wish to customize does not appear in the 
    list below, then the template file should be directly modified on disk
    (/opt/zmail/conf/nginx/templates/*), and the corresponding keyword, say,
    ${k}, should be replaced by the desired value.

    Also make sure that the customized template files are backed up, because
    upgrades will overwrite any modifications made to the template files

    For example, the NGINX log level keyword ${main.loglevel} is not overridden
    by any LDAP configuration. Therefore, if debug log level is desired, then 
    the template file nginx.conf.main.template must be edited, and the line:

        error_log  ${main.logfile} ${main.loglevel};

    must be replaced by

        error_log  ${main.logfile} debug;

    (See http://wiki.codemongers.com/ for a complete reference of NGINX 
    configuration directives)


    * krb5_keytab

      Name                  : krb5_keytab
      Type                  : localconfig
      Get:                  : zmlocalconfig -x krb5_keytab
      Set:                  : zmlocalconfig -e krb5_keytab=<value>
      Default:              : /opt/zmail/conf/krb5.keytab
      Overrides             : ${main.krb5keytab}

    * ldap_nginx_password

      Name                  : ldap_nginx_password
      Type                  : localconfig
      Get                   : zmlocalconfig -x -s ldap_nginx_password
      Set                   : zmlocalconfig -e ldap_nginx_password=<value>
      Default               : zmnginx
      Overrides             : ${mail.dpasswd}

    * zmailReverseProxyIPLoginLimit

      Name                  : zmailReverseProxyIPLoginLimit
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxyIPLoginLimit
      Set                   : zmprov mcf zmailReverseProxyIPLoginLimit <value>
      Default               : 0
      Overrides             : ${mail.ipmax}

    * zmailReverseProxyIPLoginLimitTime

      Name                  : zmailReverseProxyIPLoginLimitTime
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxyIPLoginLimitTime
      Set                   : zmprov mcf zmailReverseProxyIPLoginLimitTime \
                            :  <value>
      Default               : 3600 (seconds)
      Overrides             : ${mail.ipttl}

    * zmailReverseProxyUserLoginLimit

      Name                  : zmailReverseProxyUserLoginLimit
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxyUserLoginLimit
      Set                   : zmprov mcf zmailReverseProxyUserLoginLimit \
                            :  <value>
      Default               : 0
      Overrides             : ${mail.usermax}

    * zmailReverseProxyUserLoginLimitTime

      Name                  : zmailReverseProxyUserLoginLimitTime
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxyUserLoginLimitTime
      Set                   : zmprov mcf zmailReverseProxyUserLoginLimitTime \
                            :  <value>
      Default               : 3600 (seconds)
      Overrides             : ${mail.userttl}

    * zmailReverseProxySendPop3Xoip

      Name                  : zmailReverseProxySendPop3Xoip
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxySendPop3Xoip
      Set                   : zmprov mcf zmailReverseProxySendPop3Xoip <value>
      Default               : TRUE
      Overrides             : mail.upstream.pop3xoip

    * zmailReverseProxySendImapId

      Name                  : zmailReverseProxySendImapId
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxySendImapId
      Set                   : zmprov mcf zmailReverseProxySendImapId <value>
      Default               : TRUE
      Overrides             : mail.upstream.imapid

    * zmailReverseProxyImapSaslGssapiEnabled

      Name                  : zmailReverseProxyImapSaslGssapiEnabled
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyImapSaslGssapiEnabled
      Get(server)           : zmprov gs <server> \
                            :  zmailReverseProxyImapSaslGssapiEnabled
      Set(global)           : zmprov mcf \
                            :  zmailReverseProxyImapSaslGssapiEnabled <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyImapSaslGssapiEnabled <value>
      Default               : FALSE
      Overrides             : mail.imap.authgssapi.enabled

    * zmailReverseProxyPop3SaslGssapiEnabled

      Name                  : zmailReverseProxyPop3SaslGssapiEnabled
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyPop3SaslGssapiEnabled
      Get(server)           : zmprov gs <server> \
                            :  zmailReverseProxyPop3SaslGssapiEnabled
      Set(global)           : zmprov mcf \
                            :  zmailReverseProxyPop3SaslGssapiEnabled <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyPop3SaslGssapiEnabled <value>
      Default               : FALSE
      Overrides             : mail.pop3.authgssapi.enabled

    * zmailReverseProxyDefaultRealm

      Name                  : zmailReverseProxyDefaultRealm
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyDefaultRealm
      Get(server)           : zmprov gs <server> zmailReverseProxyDefaultRealm
      Set(global)           : zmprov mcf zmailReverseProxyDefaultRealm <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyDefaultRealm <value>
      Default               : EXAMPLE.COM
      Overrides             : ${mail.defaultrealm}

    * zmailReverseProxySSLCiphers

      Name                  : zmailReverseProxySSLCiphers
      Type                  : LDAP (globalConfig)
      Get                   : zmprov gcf zmailReverseProxySSLCiphers
      Set                   : zmprov mcf zmailReverseProxySSLCiphers <value>
      Default               : !SSLv2:!MD5:HIGH
      Overrides             : ${mail.ssl.ciphers}

    * zmailReverseProxyMailEnabled

      Name                  : zmailReverseProxyMailEnabled
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyMailEnabled
      Get(server)           : zmprov gs <server> zmailReverseProxyMailEnabled
      Set(global)           : zmprov mcf zmailReverseProxyMailEnabled <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyMailEnabled <value>
      Default               : TRUE
      Overrides             : ${mail.enabled}

    * zmailReverseProxyHttpEnabled

      Name                  : zmailReverseProxyHttpEnabled
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyHttpEnabled
      Get(server)           : zmprov gs <server> zmailReverseProxyHttpEnabled
      Set(global)           : zmprov mcf zmailReverseProxyHttpEnabled <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyHttpEnabled <value>
      Default               : FALSE
      Overrides             : ${web.enabled}

    * zmailPop3ProxyBindPort

      Name                  : zmailPop3ProxyBindPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailPop3ProxyBindPort
      Get(server)           : zmprov gs <server> zmailPop3ProxyBindPort
      Set(global)           : zmprov mcf zmailPop3ProxyBindPort <value>
      Set(server)           : zmprov ms <server> zmailPop3ProxyBindPort <value>
      Default               : 110
      Overrides             : ${mail.pop3.port}

    * zmailPop3SSLProxyBindPort

      Name                  : zmailPop3SSLProxyBindPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailPop3SSLProxyBindPort
      Get(server)           : zmprov gs <server> zmailPop3SSLProxyBindPort
      Set(global)           : zmprov mcf zmailPop3SSLProxyBindPort <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailPop3SSLProxyBindPort <value>
      Default               : 995
      Overrides             : ${mail.pop3s.port}

    * zmailImapProxyBindPort

      Name                  : zmailImapProxyBindPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailImapProxyBindPort
      Get(server)           : zmprov gs <server> zmailImapProxyBindPort
      Set(global)           : zmprov mcf zmailImapProxyBindPort <value>
      Set(server)           : zmprov ms <server> zmailImapProxyBindPort <value>
      Default               : 143
      Overrides             : ${mail.imap.port}

    * zmailImapSSLProxyBindPort

      Name                  : zmailImapSSLProxyBindPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailImapSSLProxyBindPort
      Get(server)           : zmprov gs <server> zmailImapSSLProxyBindPort
      Set(global)           : zmprov mcf zmailImapSSLProxyBindPort <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailImapSSLProxyBindPort <value>
      Default               : 993
      Overrides             : ${mail.imaps.port}

    * zmailReverseProxyImapStartTlsMode

      Name                  : zmailReverseProxyImapStartTlsMode
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyImapStartTlsMode
      Get(server)           : zmprov gs <server> \
                            :  zmailReverseProxyImapStartTlsMode
      Set(global)           : zmprov mcf zmailReverseProxyImapStartTlsMode \
                            :  <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyImapStartTlsMode <value>
      Default               : only
      Overrides             : ${mail.imap.tls}

    * zmailReverseProxyPop3StartTlsMode

      Name                  : zmailReverseProxyPop3StartTlsMode
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyPop3StartTlsMode
      Get(server)           : zmprov gs <server> \
                            :  zmailReverseProxyPop3StartTlsMode
      Set(global)           : zmprov mcf zmailReverseProxyPop3StartTlsMode \
                            :  <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyPop3StartTlsMode <value>
      Default               : only
      Overrides             : ${mail.pop3.tls}

    * zmailFileUploadMaxSize

      Name                  : zmailFileUploadMaxSize 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailFileUploadMaxSize
      Get(server)           : zmprov gs <server> zmailFileUploadMaxSize
      Set(global)           : zmprov mcf zmailFileUploadMaxSize <value>
      Set(server)           : zmprov ms <server> zmailFileUploadMaxSize <value>
      Default               : 10485760
      Overrides             : ${web.uploadmax}

    * zmailMailProxyPort

      Name                  : zmailMailProxyPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailMailProxyPort
      Get(server)           : zmprov gs <server> zmailMailProxyPort
      Set(global)           : zmprov mcf zmailMailProxyPort <value>
      Set(server)           : zmprov ms <server> zmailMailProxyPort <value>
      Default               : 0
      Overrides             : ${web.http.port}

    * zmailMailSSLProxyPort

      Name                  : zmailMailSSLProxyPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailMailSSLProxyPort
      Get(server)           : zmprov gs <server> zmailMailSSLProxyPort
      Set(global)           : zmprov mcf zmailMailSSLProxyPort <value>
      Set(server)           : zmprov ms <server> zmailMailSSLProxyPort <value>
      Default               : 0
      Overrides             : ${web.https.port}

    * zmailMailPort

      Name                  : zmailMailPort 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailMailPort
      Get(server)           : zmprov gs <server> zmailMailPort
      Set(global)           : zmprov mcf zmailMailPort <value>
      Set(server)           : zmprov ms <server> zmailMailPort <value>
      Default               : 0
      Overrides             : ${web.http.uport}

    * zmailReverseProxyMailMode

      Name                  : zmailReverseProxyMailMode 
      Type                  : LDAP (globalConfig,server)
      Get(global)           : zmprov gcf zmailReverseProxyMailMode
      Get(server)           : zmprov gs <server> zmailReverseProxyMailMode
      Set(global)           : zmprov mcf zmailReverseProxyMailMode <value>
      Set(server)           : zmprov ms <server> \
                            :  zmailReverseProxyMailMode <value>
      Default               : both
      Overrides             : ${web.mailmode}

                                       *
